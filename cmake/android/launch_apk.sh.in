
cd $(dirname "$0")

am start -a android.intent.action.MAIN -n com.@PROJECT_NAME@.@target@/android.app.NativeActivity -D -N

while [ 1 ]
do
    pid=`pidof com.@PROJECT_NAME@.@target@`
    echo $pid
    if [ -z "$pid" ]
    then
            echo "Waiting..."
    else
            break
    fi
    sleep 1
done

pkill -f gdbserver

daemonize gdbserver64 --attach localhost:2345 $pid

echo gdbserver connected to @target@ is running